<!DOCTYPE html><html lang="ja" class="scroll-smooth"> <head><meta charset="UTF-8"><meta name="description" content="ã§ã°ãŒã‚ã®ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªã‚µã‚¤ãƒˆ"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v5.16.3"><title>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ - ãƒ¬ãƒ¼ãƒ³é˜²è¡›Ver</title><meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"><script type="module" src="/debagame-homepage/_astro/ClientRouter.astro_astro_type_script_index_0_lang.QW52Ox2j.js"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-ZDEY5ZH97E"></script><script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			// Initial tracking is handled by astro:page-load to support View Transitions
			document.addEventListener('astro:page-load', () => {
				gtag('config', 'G-ZDEY5ZH97E', {
					page_path: window.location.pathname,
				});
			});
		</script><link rel="stylesheet" href="/debagame-homepage/_astro/index.BdlpVDGh.css">
<style>.slider-group{display:flex;align-items:center;gap:8px;margin-bottom:6px}.slider-group label{font-size:11px;color:#94a3b8;min-width:80px;text-align:right}.slider-group input[type=range]{flex:1;accent-color:#3b82f6;height:4px;cursor:pointer}.slider-group .val{font-size:10px;color:#64748b;min-width:30px;text-align:center;font-family:monospace}.color-input{width:28px;height:20px;border:1px solid #475569;border-radius:4px;cursor:pointer;padding:0;background:none}.section-title{font-size:12px;font-weight:800;color:#60a5fa;border-bottom:1px solid #334155;padding-bottom:4px;margin-bottom:8px;margin-top:12px}.motion-btn{padding:4px 10px;font-size:10px;font-weight:700;border-radius:6px;cursor:pointer;border:2px solid transparent;transition:all .15s;white-space:nowrap}.motion-btn:hover{transform:scale(1.05)}.motion-btn.active{border-color:#3b82f6;box-shadow:0 0 12px #3b82f666}.panel{background:#0f172a;border:1px solid #1e293b;border-radius:8px;padding:12px}.tab-btn-d{padding:4px 10px;font-size:11px;font-weight:700;border-radius:4px;cursor:pointer;transition:all .15s}.tab-btn-d.active{background:#1e3a5f;color:#60a5fa}.tab-btn-d:not(.active){background:transparent;color:#64748b}#designer-panel::-webkit-scrollbar{width:4px}#designer-panel::-webkit-scrollbar-thumb{background:#334155;border-radius:4px}.wpn-card{background:#1e293b;border:2px solid #334155;border-radius:8px;padding:8px;cursor:pointer;transition:all .15s}.wpn-card:hover{border-color:#475569}.wpn-card.selected{border-color:#3b82f6;box-shadow:0 0 10px #3b82f64d}
.astro-route-announcer{position:absolute;left:0;top:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;width:1px;height:1px}:root{--accent: 136, 58, 234;--accent-light: 224, 204, 250;--accent-dark: 49, 10, 101;--accent-gradient: linear-gradient( 45deg, rgb(var(--accent)), rgb(var(--accent-light)) 30%, white 60% )}
</style></head> <body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen flex flex-col font-sans"> <aside id="sidebar" class="fixed top-0 left-0 z-50 w-64 h-screen transition-transform -translate-x-full bg-white border-r border-gray-200 dark:bg-gray-800 dark:border-gray-700 shadow-lg" aria-label="Sidebar"> <div class="h-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800 flex flex-col"> <div class="flex justify-between items-center mb-6 px-2"> <h2 class="text-xl font-bold text-gray-800 dark:text-white">Menu</h2> <button id="close-sidebar" class="text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2"> <svg class="w-6 h-6" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path> </svg> <span class="sr-only">Close menu</span> </button> </div> <ul class="space-y-2 font-medium"> <li> <a href="/debagame-homepage" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <svg class="w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 22 21"> <path d="M16.975 11H10V4.025a1 1 0 0 0-1.066-.998 8.5 8.5 0 1 0 9.039 9.039.999.999 0 0 0-1-1.066h.002Z"></path> <path d="M12.5 0c-.157 0-.311.01-.565.027A1 1 0 0 0 11 1.02V10h8.975a1 1 0 0 0 1-.935c.013-.188.028-.374.028-.565A8.51 8.51 0 0 0 12.5 0Z"></path> </svg> <span class="ms-3">ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸</span> </a> </li> <li class="pt-4 mt-4 space-y-2 border-t border-gray-200 dark:border-gray-700"> <div class="px-2 text-xs font-semibold text-gray-500 uppercase dark:text-gray-400">Contents</div> </li> <li> <a href="/debagame-homepage/ai-timeline" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> â„¹ï¸ </span> <span class="ms-3">AIå¹´è¡¨</span> </a> </li><li> <a href="/debagame-homepage/game/chinchiro" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> ğŸ® </span> <span class="ms-3">ç„¡é™ãƒãƒ³ãƒãƒ­</span> </a> </li><li> <a href="/debagame-homepage/game/xylophone" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> ğŸ® </span> <span class="ms-3">æœ¨ç´ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿</span> </a> </li><li> <a href="/debagame-homepage/tool/size-check" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> ğŸ› ï¸ </span> <span class="ms-3">æœã®ã‚µã‚¤ã‚ºæ¤œè¨</span> </a> </li><li> <a href="/debagame-homepage/dashboard/health" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> ğŸ“Š </span> <span class="ms-3">å¥åº·è¨ºæ–­ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span> </a> </li><li> <a href="/debagame-homepage/dashboard/bear" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> ğŸ“Š </span> <span class="ms-3">ç†Šè¢«å®³çŠ¶æ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</span> </a> </li><li> <a href="/debagame-homepage/info/world-map" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> â„¹ï¸ </span> <span class="ms-3">ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ä¸–ç•Œåœ°å›³</span> </a> </li><li> <a href="/debagame-homepage/info/number-plate" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> â„¹ï¸ </span> <span class="ms-3">ãƒŠãƒ³ãƒãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆæƒ…å ±</span> </a> </li><li> <a href="/debagame-homepage/game/pc-break" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> ğŸ® </span> <span class="ms-3">PCç ´å£Šã‚²ãƒ¼ãƒ  2025</span> </a> </li><li> <a href="/debagame-homepage/game/lane-defense" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> ğŸ® </span> <span class="ms-3">ãƒŸãƒ‹ãƒãƒ ç„¡åŒ - ãƒ¬ãƒ¼ãƒ³é˜²è¡›Ver</span> </a> </li><li> <a href="/debagame-homepage/info/anime-timeline" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> â„¹ï¸ </span> <span class="ms-3">æ—¥æœ¬ã‚¢ãƒ‹ãƒ¡æ˜ ç”»å²å¹´è¡¨</span> </a> </li><li> <a href="/debagame-homepage/tool/length-visualizer" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center"> ğŸ› ï¸ </span> <span class="ms-3">é•·ã•å˜ä½ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¶ãƒ¼</span> </a> </li> </ul> <div class="mt-auto pt-4 border-t border-gray-200 dark:border-gray-700"> <a href="/debagame-homepage/admin/" class="flex items-center p-2 text-gray-900 rounded-lg dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 group transition-colors"> <span class="flex-shrink-0 w-5 h-5 text-gray-500 transition duration-75 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white flex items-center justify-center">
â„¹ï¸
</span> <span class="ms-3">èŠ¸äººå¹´è¡¨ï¼ˆç®¡ç†ï¼‰</span> </a> </div> </div> </aside> <div id="sidebar-overlay" class="fixed inset-0 bg-gray-900/50 z-40 hidden backdrop-blur-sm transition-opacity" aria-hidden="true"></div> <script type="module">function s(){const t=document.getElementById("sidebar"),d=document.getElementById("sidebar-overlay"),o=document.getElementById("close-sidebar"),a=document.querySelectorAll(".sidebar-toggle");function i(){t?.classList.remove("-translate-x-full"),d?.classList.remove("hidden"),document.body.classList.add("overflow-hidden")}function e(){t?.classList.add("-translate-x-full"),d?.classList.add("hidden"),document.body.classList.remove("overflow-hidden")}o?.addEventListener("click",e),d?.addEventListener("click",e),a.forEach(n=>{n.addEventListener("click",c=>{c.stopPropagation(),t?.classList.contains("-translate-x-full")?i():e()})}),document.addEventListener("keydown",n=>{n.key==="Escape"&&e()})}s();document.addEventListener("astro:page-load",s);</script>  <header class="bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-50"> <div class="container mx-auto px-4 h-16 flex items-center justify-between"> <div class="flex items-center gap-2"> <div class="w-8 h-8 bg-blue-600 rounded flex items-center justify-center text-white font-bold">
&lt;/&gt;
</div> <h1 class="font-bold text-xl tracking-tight"> <a href="/debagame-homepage" class="hover:text-blue-600 transition-colors">ã§ã°ãŒã‚ã®ã»ã‚ã±ã’</a> </h1> </div> <button class="sidebar-toggle p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700" aria-label="ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’é–‹ã"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg> </button> </div> </header> <main class="flex flex-col w-full h-[calc(100vh-64px)] overflow-hidden bg-gray-900 text-white">  <!-- ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³é¸æŠï¼ˆä¸Šéƒ¨ã«é…ç½®ã€‚Astroã®ä¸‹éƒ¨å¹²æ¸‰ã‚’å›é¿ï¼ï¼‰ --> <div class="flex gap-1 px-3 py-1.5 bg-gray-950 border-b border-gray-700 flex-wrap items-center"> <span class="text-[10px] text-gray-500 font-bold mr-1">MOTION</span> <button class="motion-btn bg-gray-700 text-gray-300 active" data-motion="idle">ğŸ§ å¾…æ©Ÿ</button> <button class="motion-btn bg-gray-700 text-gray-300" data-motion="walk">ğŸš¶ æ­©è¡Œ</button> <button class="motion-btn bg-blue-900 text-blue-300" data-motion="weak">âš”ï¸ å¼±æ”»æ’ƒ</button> <button class="motion-btn bg-red-900 text-red-300" data-motion="front-wide">ğŸŒ€ W.ã‚¹ã‚¦ã‚£ãƒ¼ãƒ—</button> <button class="motion-btn bg-cyan-900 text-cyan-300" data-motion="pierce">ğŸ’  P.ãƒ¬ã‚¤</button> <button class="motion-btn bg-yellow-900 text-yellow-300" data-motion="wide">âœï¸ G.ã‚¯ãƒ­ã‚¹</button> </div> <div class="flex flex-1 min-h-0 overflow-hidden"> <!-- å·¦: ã‚­ãƒ£ãƒ³ãƒã‚¹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ --> <div class="flex-1 flex flex-col bg-gray-800 relative"> <div class="flex items-center gap-2 p-2 bg-gray-900/80 border-b border-gray-700"> <span class="text-xs font-bold text-blue-400">ğŸ¨ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</span> <div class="flex gap-1 ml-auto"> <button id="btn-zoom-out" class="text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">âˆ’</button> <span id="zoom-label" class="text-xs text-gray-400 px-1 leading-6">200%</span> <button id="btn-zoom-in" class="text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded">ï¼‹</button> <button id="btn-toggle-grid" class="text-xs bg-gray-700 hover:bg-gray-600 px-2 py-1 rounded ml-2">ğŸ”² ã‚°ãƒªãƒƒãƒ‰</button> </div> </div> <div class="flex-1 flex items-center justify-center overflow-hidden" id="canvas-wrap"> <canvas id="preview-canvas" width="400" height="500"></canvas> </div> </div> <!-- å³: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ‘ãƒãƒ« --> <div id="designer-panel" class="w-80 bg-gray-950 border-l border-gray-700 overflow-y-auto p-3 flex flex-col gap-2"> <!-- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ --> <div class="flex gap-1 bg-gray-900 p-1 rounded-lg"> <button class="tab-btn-d active flex-1" data-panel="body">éª¨æ ¼</button> <button class="tab-btn-d flex-1" data-panel="weapon">æ­¦å™¨</button> <button class="tab-btn-d flex-1" data-panel="colors">é…è‰²</button> <button class="tab-btn-d flex-1" data-panel="effects">æ¼”å‡º</button> <button class="tab-btn-d flex-1" data-panel="export">é€£æº</button> </div> <!-- ãƒ‘ãƒãƒ«: éª¨æ ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ --> <div id="panel-body" class="panel"> <div class="section-title">ğŸ“ å…¨ä½“ã‚¹ã‚±ãƒ¼ãƒ«</div> <div class="slider-group"> <label>ã‚µã‚¤ã‚º</label> <input type="range" id="p-scale" min="0.5" max="3" step="0.1" value="1.5"> <span class="val" id="v-scale">1.5</span> </div> <div class="section-title">ğŸ—£ï¸ é ­éƒ¨</div> <div class="slider-group"> <label>å¹…</label> <input type="range" id="p-headW" min="0.3" max="1.2" step="0.05" value="0.9"> <span class="val" id="v-headW">0.9</span> </div> <div class="slider-group"> <label>é«˜ã•</label> <input type="range" id="p-headH" min="0.15" max="0.6" step="0.05" value="0.3"> <span class="val" id="v-headH">0.3</span> </div> <div class="slider-group"> <label>Yä½ç½®</label> <input type="range" id="p-headY" min="-1.2" max="-0.3" step="0.05" value="-0.85"> <span class="val" id="v-headY">-0.85</span> </div> <div class="section-title">ğŸ‘ï¸ ã‚¢ã‚¤ï¼ˆã‚»ãƒ³ã‚µãƒ¼ï¼‰</div> <div class="slider-group"> <label>å¹…</label> <input type="range" id="p-eyeW" min="0.1" max="0.6" step="0.05" value="0.3"> <span class="val" id="v-eyeW">0.3</span> </div> <div class="slider-group"> <label>é«˜ã•</label> <input type="range" id="p-eyeH" min="2" max="8" step="1" value="4"> <span class="val" id="v-eyeH">4</span> </div> <div class="slider-group"> <label>Xä½ç½®</label> <input type="range" id="p-eyeX" min="-0.2" max="0.4" step="0.05" value="0.08"> <span class="val" id="v-eyeX">0.08</span> </div> <div class="section-title">ğŸ« èƒ´ä½“</div> <div class="slider-group"> <label>å¹…</label> <input type="range" id="p-torsoW" min="0.5" max="1.5" step="0.05" value="1.0"> <span class="val" id="v-torsoW">1.0</span> </div> <div class="slider-group"> <label>é«˜ã•</label> <input type="range" id="p-torsoH" min="0.5" max="2.0" step="0.05" value="1.1"> <span class="val" id="v-torsoH">1.1</span> </div> <div class="slider-group"> <label>Yä½ç½®</label> <input type="range" id="p-torsoY" min="-0.8" max="0" step="0.05" value="-0.6"> <span class="val" id="v-torsoY">-0.6</span> </div> <div class="section-title">ğŸ’ ã‚³ã‚¢</div> <div class="slider-group"> <label>åŠå¾„</label> <input type="range" id="p-coreR" min="2" max="10" step="1" value="5"> <span class="val" id="v-coreR">5</span> </div> <div class="slider-group"> <label>Yä½ç½®</label> <input type="range" id="p-coreY" min="-0.5" max="0.3" step="0.05" value="-0.1"> <span class="val" id="v-coreY">-0.1</span> </div> <div class="section-title">ğŸ¦µ è„šéƒ¨</div> <div class="slider-group"> <label>å¹…</label> <input type="range" id="p-legW" min="3" max="10" step="1" value="5"> <span class="val" id="v-legW">5</span> </div> <div class="slider-group"> <label>é•·ã•</label> <input type="range" id="p-legLen" min="5" max="20" step="1" value="10"> <span class="val" id="v-legLen">10</span> </div> <div class="slider-group"> <label>é–“éš”</label> <input type="range" id="p-legSpread" min="2" max="12" step="1" value="7"> <span class="val" id="v-legSpread">7</span> </div> <div class="section-title">ğŸ¦¿ ã‚¹ãƒˆãƒ©ã‚¤ãƒ—</div> <div class="slider-group"> <label>æœ¬æ•°</label> <input type="range" id="p-stripes" min="0" max="5" step="1" value="2"> <span class="val" id="v-stripes">2</span> </div> <div class="slider-group"> <label>å¤ªã•</label> <input type="range" id="p-stripeH" min="1" max="5" step="1" value="2"> <span class="val" id="v-stripeH">2</span> </div> </div> <!-- ãƒ‘ãƒãƒ«: æ­¦å™¨ï¼ˆç‹¬ç«‹ç®¡ç†ã€‚ã‚­ãƒ£ãƒ©ã¨ã¯åˆ¥äººæ ¼ã€‚ï¼‰ --> <div id="panel-weapon" class="panel hidden"> <div class="section-title">ğŸ—¡ï¸ è£…å‚™ä¸­ã®æ­¦å™¨</div> <div id="weapon-cards" class="grid grid-cols-1 gap-2 mb-3"></div> <div class="section-title">âš™ï¸ æ­¦å™¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿</div> <div class="slider-group"> <label>ã‚¢ãƒ¼ãƒ é•·</label> <input type="range" id="w-armLen" min="10" max="50" step="1" value="22"> <span class="val" id="wv-armLen">22</span> </div> <div class="slider-group"> <label>ã‚¢ãƒ¼ãƒ å¹…</label> <input type="range" id="w-armW" min="2" max="10" step="1" value="4"> <span class="val" id="wv-armW">4</span> </div> <div class="slider-group"> <label>å…ˆç«¯ã‚µã‚¤ã‚º</label> <input type="range" id="w-tipSize" min="4" max="20" step="1" value="8"> <span class="val" id="wv-tipSize">8</span> </div> <div class="slider-group"> <label>å…ˆç«¯å½¢çŠ¶</label> <input type="range" id="w-tipShape" min="0" max="2" step="1" value="0"> <span class="val" id="wv-tipShape">â– </span> </div> <div class="section-title">ğŸ¨ æ­¦å™¨ã‚«ãƒ©ãƒ¼</div> <div class="space-y-2"> <div class="flex items-center gap-2"><input type="color" class="color-input" id="w-cArm" value="#94a3b8"><label class="text-xs text-gray-400">ã‚¢ãƒ¼ãƒ </label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="w-cTip" value="#e2e8f0"><label class="text-xs text-gray-400">å…ˆç«¯</label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="w-cGlow" value="#94a3b8"><label class="text-xs text-gray-400">ç™ºå…‰</label></div> </div> <div class="slider-group mt-2"> <label>ç™ºå…‰å¼·åº¦</label> <input type="range" id="w-glowSize" min="0" max="15" step="1" value="0"> <span class="val" id="wv-glowSize">0</span> </div> <div class="section-title mt-3">ğŸ“¦ æ­¦å™¨ãƒ—ãƒªã‚»ãƒƒãƒˆ</div> <div class="grid grid-cols-2 gap-1"> <button class="wpn-preset-btn text-[10px] bg-gray-700 hover:bg-gray-600 text-gray-300 px-2 py-1.5 rounded font-bold" data-wpn="standard">ğŸ—¡ï¸ ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰</button> <button class="wpn-preset-btn text-[10px] bg-cyan-900 hover:bg-cyan-800 text-cyan-300 px-2 py-1.5 rounded font-bold" data-wpn="lance">ğŸ”± ãƒ©ãƒ³ã‚¹</button> <button class="wpn-preset-btn text-[10px] bg-red-900 hover:bg-red-800 text-red-300 px-2 py-1.5 rounded font-bold" data-wpn="greatsword">âš”ï¸ å¤§å‰£</button> <button class="wpn-preset-btn text-[10px] bg-purple-900 hover:bg-purple-800 text-purple-300 px-2 py-1.5 rounded font-bold" data-wpn="staff">ğŸª„ ã‚¹ã‚¿ãƒƒãƒ•</button> <button class="wpn-preset-btn text-[10px] bg-yellow-900 hover:bg-yellow-800 text-yellow-300 px-2 py-1.5 rounded font-bold" data-wpn="gauntlet">ğŸ¥Š ã‚¬ãƒ³ãƒˆãƒ¬ãƒƒãƒˆ</button> <button class="wpn-preset-btn text-[10px] bg-green-900 hover:bg-green-800 text-green-300 px-2 py-1.5 rounded font-bold" data-wpn="dagger">ğŸ—¡ï¸ ãƒ€ã‚¬ãƒ¼</button> </div> </div> <!-- ãƒ‘ãƒãƒ«: é…è‰² --> <div id="panel-colors" class="panel hidden"> <div class="section-title">ğŸ¨ ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ</div> <div class="space-y-2"> <div class="flex items-center gap-2"><input type="color" class="color-input" id="c-body" value="#3b82f6"><label class="text-xs text-gray-400">èƒ´ä½“ï¼ˆãƒ¡ã‚¤ãƒ³ï¼‰</label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="c-bodyAccent" value="#60a5fa"><label class="text-xs text-gray-400">èƒ´ä½“ï¼ˆã‚¢ã‚¯ã‚»ãƒ³ãƒˆï¼‰</label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="c-head" value="#1e3a5f"><label class="text-xs text-gray-400">é ­éƒ¨</label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="c-eye" value="#38bdf8"><label class="text-xs text-gray-400">ã‚¢ã‚¤ï¼ˆã‚»ãƒ³ã‚µãƒ¼ï¼‰</label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="c-core" value="#34d399"><label class="text-xs text-gray-400">ã‚³ã‚¢</label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="c-coreGlow" value="#10b981"><label class="text-xs text-gray-400">ã‚³ã‚¢ï¼ˆç™ºå…‰ï¼‰</label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="c-legs" value="#1e40af"><label class="text-xs text-gray-400">è„šéƒ¨</label></div> <div class="flex items-center gap-2"><input type="color" class="color-input" id="c-shadow" value="#000000"><label class="text-xs text-gray-400">å½±</label></div> </div> <div class="section-title mt-4">ğŸŒˆ ãƒ—ãƒªã‚»ãƒƒãƒˆ</div> <div class="grid grid-cols-3 gap-1"> <button class="preset-btn text-[10px] bg-blue-900 hover:bg-blue-800 text-blue-300 px-2 py-1.5 rounded font-bold" data-preset="default">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</button> <button class="preset-btn text-[10px] bg-red-900 hover:bg-red-800 text-red-300 px-2 py-1.5 rounded font-bold" data-preset="crimson">ã‚¯ãƒªãƒ ã‚¾ãƒ³</button> <button class="preset-btn text-[10px] bg-green-900 hover:bg-green-800 text-green-300 px-2 py-1.5 rounded font-bold" data-preset="forest">ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆ</button> <button class="preset-btn text-[10px] bg-purple-900 hover:bg-purple-800 text-purple-300 px-2 py-1.5 rounded font-bold" data-preset="phantom">ãƒ•ã‚¡ãƒ³ãƒˆãƒ </button> <button class="preset-btn text-[10px] bg-yellow-900 hover:bg-yellow-800 text-yellow-300 px-2 py-1.5 rounded font-bold" data-preset="golden">ã‚´ãƒ¼ãƒ«ãƒ‰</button> <button class="preset-btn text-[10px] bg-gray-700 hover:bg-gray-600 text-gray-300 px-2 py-1.5 rounded font-bold" data-preset="stealth">ã‚¹ãƒ†ãƒ«ã‚¹</button> </div> </div> <!-- ãƒ‘ãƒãƒ«: æ¼”å‡º --> <div id="panel-effects" class="panel hidden"> <div class="section-title">âœ¨ ã‚¨ãƒ•ã‚§ã‚¯ãƒˆè¨­å®š</div> <div class="slider-group"> <label>ã‚³ã‚¢ç™ºå…‰</label> <input type="range" id="p-coreGlowSize" min="0" max="20" step="1" value="8"> <span class="val" id="v-coreGlowSize">8</span> </div> <div class="slider-group"> <label>ã‚¢ã‚¤ç™ºå…‰</label> <input type="range" id="p-eyeGlowSize" min="0" max="15" step="1" value="6"> <span class="val" id="v-eyeGlowSize">6</span> </div> <div class="slider-group"> <label>å½±ã®åºƒãŒã‚Š</label> <input type="range" id="p-shadowW" min="0.3" max="1.2" step="0.05" value="0.8"> <span class="val" id="v-shadowW">0.8</span> </div> <div class="slider-group"> <label>å½±ã®é€æ˜åº¦</label> <input type="range" id="p-shadowAlpha" min="0" max="0.8" step="0.05" value="0.3"> <span class="val" id="v-shadowAlpha">0.3</span> </div> <div class="section-title">ğŸƒ ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³é€Ÿåº¦</div> <div class="slider-group"> <label>å‘¼å¸é€Ÿåº¦</label> <input type="range" id="p-breathSpeed" min="100" max="800" step="50" value="300"> <span class="val" id="v-breathSpeed">300</span> </div> <div class="slider-group"> <label>æ­©è¡Œé€Ÿåº¦</label> <input type="range" id="p-walkSpeed" min="50" max="300" step="10" value="120"> <span class="val" id="v-walkSpeed">120</span> </div> <div class="slider-group"> <label>ã‚¢ã‚¤æ˜æ»…</label> <input type="range" id="p-eyeFlicker" min="100" max="1000" step="50" value="500"> <span class="val" id="v-eyeFlicker">500</span> </div> </div> <!-- ãƒ‘ãƒãƒ«: é€£æº --> <div id="panel-export" class="panel hidden"> <div class="section-title">ğŸ”— æœ¬ä½“é€£æº</div> <p class="text-xs text-gray-500 mb-3">ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’ãƒ¬ãƒ¼ãƒ³ç„¡åŒæœ¬ä½“ã«åæ˜ ã—ã¾ã™ã€‚ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¨æ­¦å™¨ã¯åˆ¥ã€…ã®ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p> <button id="btn-save-config" class="w-full bg-blue-700 hover:bg-blue-600 text-white py-2.5 rounded-lg font-bold text-sm transition mb-2">
ğŸ’¾ æœ¬ä½“ã«åæ˜ ã™ã‚‹
</button> <button id="btn-reset-config" class="w-full bg-gray-700 hover:bg-gray-600 text-gray-300 py-2 rounded-lg font-bold text-xs transition mb-4">
ğŸ”„ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
</button> <div class="section-title">ğŸ“‹ è¨­å®šJSON</div> <p class="text-xs text-gray-500 mb-2">ã‚­ãƒ£ãƒ©ï¼‹æ­¦å™¨ã®çµ±åˆè¨­å®šã§ã™ã€‚</p> <textarea id="config-json" class="w-full bg-gray-900 border border-gray-700 text-gray-400 text-[10px] font-mono p-2 rounded resize-none h-40" readonly></textarea> <div class="flex gap-1 mt-1"> <button id="btn-copy-json" class="flex-1 bg-gray-700 hover:bg-gray-600 text-gray-300 py-1.5 rounded text-xs font-bold transition">ğŸ“‹ ã‚³ãƒ”ãƒ¼</button> <button id="btn-import-json" class="flex-1 bg-gray-700 hover:bg-gray-600 text-gray-300 py-1.5 rounded text-xs font-bold transition">ğŸ“¥ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button> </div> <div id="save-status" class="text-center text-xs mt-3 opacity-0 transition-opacity duration-500"></div> </div> </div> </div> </main>  </body></html> <script>
// ====================================================
// ğŸ¨ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒ‡ã‚¶ã‚¤ãƒŠãƒ¼ v2
// ã€Œæ­¦å™¨ã¯åˆ¥äººæ ¼ã€‚ãã‚ŒãŒæ­£ã—ã„è¨­è¨ˆã€‚ã€
// ====================================================

const canvas = document.getElementById('preview-canvas');
const ctx = canvas.getContext('2d');
let zoom = 2.0;
let showGrid = true;
let currentMotion = 'idle';

// â”€â”€ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šï¼ˆæ­¦å™¨ã‚’é™¤ã„ãŸç´ ä½“ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰ â”€â”€
const CHAR_CONFIG = {
    scale: 1.5,
    headW: 0.9, headH: 0.3, headY: -0.85,
    eyeW: 0.3, eyeH: 4, eyeX: 0.08,
    torsoW: 1.0, torsoH: 1.1, torsoY: -0.6,
    coreR: 5, coreY: -0.1,
    legW: 5, legLen: 10, legSpread: 7,
    stripes: 2, stripeH: 2,
    // é…è‰²ï¼ˆç´ ä½“ã®ã¿ã€æ­¦å™¨è‰²ã¯å«ã¾ãªã„ï¼‰
    cBody: '#3b82f6', cBodyAccent: '#60a5fa',
    cHead: '#1e3a5f', cEye: '#38bdf8',
    cCore: '#34d399', cCoreGlow: '#10b981',
    cLegs: '#1e40af', cShadow: '#000000',
    // æ¼”å‡º
    coreGlowSize: 8, eyeGlowSize: 6,
    shadowW: 0.8, shadowAlpha: 0.3,
    breathSpeed: 300, walkSpeed: 120, eyeFlicker: 500
};

// â”€â”€ æ­¦å™¨è¨­å®šï¼ˆã‚­ãƒ£ãƒ©ã¨ã¯å®Œå…¨ã«ç‹¬ç«‹ï¼ä»˜ã‘æ›¿ãˆå¯èƒ½ï¼ï¼‰ â”€â”€
const WEAPON_CONFIG = {
    armLen: 22, armW: 4, tipSize: 8,
    tipShape: 0, // 0=å››è§’, 1=ä¸¸, 2=ä¸‰è§’
    cArm: '#94a3b8', cTip: '#e2e8f0', cGlow: '#94a3b8',
    glowSize: 0
};

// æ­¦å™¨ãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆã‚²ãƒ¼ãƒ ã®è£…å‚™ãƒ‰ãƒ­ãƒƒãƒ—ã¨ã—ã¦æ´»ç”¨å¯èƒ½ï¼ï¼‰
const WEAPON_PRESETS = {
    standard: { armLen:22, armW:4, tipSize:8, tipShape:0, cArm:'#94a3b8', cTip:'#e2e8f0', cGlow:'#94a3b8', glowSize:0 },
    lance:    { armLen:40, armW:3, tipSize:6, tipShape:2, cArm:'#22d3ee', cTip:'#67e8f9', cGlow:'#22d3ee', glowSize:8 },
    greatsword:{ armLen:35, armW:6, tipSize:14, tipShape:0, cArm:'#ef4444', cTip:'#fca5a5', cGlow:'#ef4444', glowSize:6 },
    staff:    { armLen:30, armW:3, tipSize:10, tipShape:1, cArm:'#a78bfa', cTip:'#e879f9', cGlow:'#c026d3', glowSize:12 },
    gauntlet: { armLen:12, armW:8, tipSize:12, tipShape:0, cArm:'#fbbf24', cTip:'#fef08a', cGlow:'#f59e0b', glowSize:5 },
    dagger:   { armLen:16, armW:3, tipSize:5, tipShape:2, cArm:'#6ee7b7', cTip:'#d1fae5', cGlow:'#10b981', glowSize:3 }
};

const TIP_SHAPES = ['â– ', 'â—', 'â–²'];

// ã‚«ãƒ©ãƒ¼ãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆç´ ä½“ç”¨ã€æ­¦å™¨è‰²ã¯å«ã¾ãªã„ï¼‰
const PRESETS = {
    default: { cBody:'#3b82f6', cBodyAccent:'#60a5fa', cHead:'#1e3a5f', cEye:'#38bdf8', cCore:'#34d399', cCoreGlow:'#10b981', cLegs:'#1e40af' },
    crimson: { cBody:'#dc2626', cBodyAccent:'#f87171', cHead:'#450a0a', cEye:'#fbbf24', cCore:'#f97316', cCoreGlow:'#ea580c', cLegs:'#7f1d1d' },
    forest: { cBody:'#16a34a', cBodyAccent:'#4ade80', cHead:'#14532d', cEye:'#a3e635', cCore:'#22d3ee', cCoreGlow:'#06b6d4', cLegs:'#166534' },
    phantom: { cBody:'#7c3aed', cBodyAccent:'#a78bfa', cHead:'#1e1b4b', cEye:'#f0abfc', cCore:'#e879f9', cCoreGlow:'#c026d3', cLegs:'#4c1d95' },
    golden: { cBody:'#ca8a04', cBodyAccent:'#fbbf24', cHead:'#451a03', cEye:'#fef08a', cCore:'#f59e0b', cCoreGlow:'#d97706', cLegs:'#713f12' },
    stealth: { cBody:'#374151', cBodyAccent:'#4b5563', cHead:'#111827', cEye:'#6ee7b7', cCore:'#10b981', cCoreGlow:'#059669', cLegs:'#1f2937' }
};

// â”€â”€ UIãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚° â”€â”€
function bindSliders() {
    // ã‚­ãƒ£ãƒ©ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
    const charSliders = {
        'p-scale':'scale','p-headW':'headW','p-headH':'headH','p-headY':'headY',
        'p-eyeW':'eyeW','p-eyeH':'eyeH','p-eyeX':'eyeX',
        'p-torsoW':'torsoW','p-torsoH':'torsoH','p-torsoY':'torsoY',
        'p-coreR':'coreR','p-coreY':'coreY',
        'p-legW':'legW','p-legLen':'legLen','p-legSpread':'legSpread',
        'p-stripes':'stripes','p-stripeH':'stripeH',
        'p-coreGlowSize':'coreGlowSize','p-eyeGlowSize':'eyeGlowSize',
        'p-shadowW':'shadowW','p-shadowAlpha':'shadowAlpha',
        'p-breathSpeed':'breathSpeed','p-walkSpeed':'walkSpeed','p-eyeFlicker':'eyeFlicker'
    };
    Object.entries(charSliders).forEach(([id, key]) => {
        const el = document.getElementById(id);
        const valEl = document.getElementById('v-' + key);
        if (!el) return;
        el.addEventListener('input', () => {
            CHAR_CONFIG[key] = parseFloat(el.value);
            if (valEl) valEl.innerText = el.value;
        });
    });

    // æ­¦å™¨ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
    const wpnSliders = { 'w-armLen':'armLen', 'w-armW':'armW', 'w-tipSize':'tipSize', 'w-tipShape':'tipShape', 'w-glowSize':'glowSize' };
    Object.entries(wpnSliders).forEach(([id, key]) => {
        const el = document.getElementById(id);
        const valEl = document.getElementById('wv-' + key);
        if (!el) return;
        el.addEventListener('input', () => {
            WEAPON_CONFIG[key] = parseFloat(el.value);
            if (key === 'tipShape') {
                if (valEl) valEl.innerText = TIP_SHAPES[parseInt(el.value)] || 'â– ';
            } else {
                if (valEl) valEl.innerText = el.value;
            }
        });
    });

    // ã‚­ãƒ£ãƒ©ã‚«ãƒ©ãƒ¼
    const charColors = {
        'c-body':'cBody','c-bodyAccent':'cBodyAccent','c-head':'cHead',
        'c-eye':'cEye','c-core':'cCore','c-coreGlow':'cCoreGlow',
        'c-legs':'cLegs','c-shadow':'cShadow'
    };
    Object.entries(charColors).forEach(([id, key]) => {
        const el = document.getElementById(id);
        if (el) el.addEventListener('input', () => { CHAR_CONFIG[key] = el.value; });
    });

    // æ­¦å™¨ã‚«ãƒ©ãƒ¼
    const wpnColors = { 'w-cArm':'cArm', 'w-cTip':'cTip', 'w-cGlow':'cGlow' };
    Object.entries(wpnColors).forEach(([id, key]) => {
        const el = document.getElementById(id);
        if (el) el.addEventListener('input', () => { WEAPON_CONFIG[key] = el.value; });
    });
}

function syncUIFromConfig() {
    // ã‚­ãƒ£ãƒ©ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
    const charSliderIds = {
        'p-scale':'scale','p-headW':'headW','p-headH':'headH','p-headY':'headY',
        'p-eyeW':'eyeW','p-eyeH':'eyeH','p-eyeX':'eyeX',
        'p-torsoW':'torsoW','p-torsoH':'torsoH','p-torsoY':'torsoY',
        'p-coreR':'coreR','p-coreY':'coreY',
        'p-legW':'legW','p-legLen':'legLen','p-legSpread':'legSpread',
        'p-stripes':'stripes','p-stripeH':'stripeH',
        'p-coreGlowSize':'coreGlowSize','p-eyeGlowSize':'eyeGlowSize',
        'p-shadowW':'shadowW','p-shadowAlpha':'shadowAlpha',
        'p-breathSpeed':'breathSpeed','p-walkSpeed':'walkSpeed','p-eyeFlicker':'eyeFlicker'
    };
    Object.entries(charSliderIds).forEach(([id, key]) => {
        const el = document.getElementById(id);
        const valEl = document.getElementById('v-' + key);
        if (el) { el.value = CHAR_CONFIG[key]; if (valEl) valEl.innerText = CHAR_CONFIG[key]; }
    });
    // ã‚­ãƒ£ãƒ©ã‚«ãƒ©ãƒ¼
    const charColorIds = {
        'c-body':'cBody','c-bodyAccent':'cBodyAccent','c-head':'cHead',
        'c-eye':'cEye','c-core':'cCore','c-coreGlow':'cCoreGlow',
        'c-legs':'cLegs','c-shadow':'cShadow'
    };
    Object.entries(charColorIds).forEach(([id, key]) => {
        const el = document.getElementById(id);
        if (el) el.value = CHAR_CONFIG[key];
    });
    // æ­¦å™¨ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼
    const wpnSliderIds = { 'w-armLen':'armLen', 'w-armW':'armW', 'w-tipSize':'tipSize', 'w-tipShape':'tipShape', 'w-glowSize':'glowSize' };
    Object.entries(wpnSliderIds).forEach(([id, key]) => {
        const el = document.getElementById(id);
        const valEl = document.getElementById('wv-' + key);
        if (el) {
            el.value = WEAPON_CONFIG[key];
            if (key === 'tipShape') { if (valEl) valEl.innerText = TIP_SHAPES[parseInt(el.value)] || 'â– '; }
            else { if (valEl) valEl.innerText = WEAPON_CONFIG[key]; }
        }
    });
    // æ­¦å™¨ã‚«ãƒ©ãƒ¼
    const wpnColorIds = { 'w-cArm':'cArm', 'w-cTip':'cTip', 'w-cGlow':'cGlow' };
    Object.entries(wpnColorIds).forEach(([id, key]) => {
        const el = document.getElementById(id);
        if (el) el.value = WEAPON_CONFIG[key];
    });
}

// â”€â”€ æç”»: ç´ ä½“ï¼ˆæ­¦å™¨ãªã—ï¼‰ â”€â”€
function drawBody(ctx, x, y, baseSize, facing, time) {
    const C = CHAR_CONFIG;
    const s = baseSize * C.scale;
    
    ctx.save();
    if (facing === -1) {
        ctx.translate(x, y); ctx.scale(-1, 1); ctx.translate(-x, -y);
    }

    // å½±
    ctx.fillStyle = `rgba(${hexToRGB(C.cShadow)}, ${C.shadowAlpha})`;
    ctx.beginPath();
    ctx.ellipse(x, y + s, s * C.shadowW, 4, 0, 0, Math.PI * 2);
    ctx.fill();

    // è„šéƒ¨
    const walkCycle = Math.sin(time / C.walkSpeed) * 4;
    ctx.fillStyle = C.cLegs;
    ctx.fillRect(x - C.legSpread/2 - C.legW/2, y + s * 0.4, C.legW, C.legLen + walkCycle);
    ctx.fillRect(x + C.legSpread/2 - C.legW/2, y + s * 0.4, C.legW, C.legLen - walkCycle);

    // èƒ´ä½“
    ctx.fillStyle = C.cBody;
    ctx.fillRect(x - s * C.torsoW * 0.5, y + s * C.torsoY, s * C.torsoW, s * C.torsoH);
    if (C.stripes > 0) {
        ctx.fillStyle = C.cBodyAccent;
        const stripeStart = C.torsoY + 0.2;
        const stripeSpacing = (C.torsoH - 0.4) / Math.max(1, C.stripes);
        for (let i = 0; i < C.stripes; i++) {
            ctx.fillRect(x - s * C.torsoW * 0.5, y + s * (stripeStart + stripeSpacing * i), s * C.torsoW, C.stripeH);
        }
    }

    // ã‚³ã‚¢
    const corePulse = 0.8 + Math.sin(time / C.breathSpeed) * 0.2;
    ctx.fillStyle = C.cCore;
    ctx.globalAlpha = corePulse;
    ctx.shadowColor = C.cCoreGlow;
    ctx.shadowBlur = C.coreGlowSize;
    ctx.beginPath();
    ctx.arc(x, y + s * C.coreY, C.coreR, 0, Math.PI * 2);
    ctx.fill();
    ctx.globalAlpha = 1;
    ctx.shadowBlur = 0;

    // é ­éƒ¨
    ctx.fillStyle = C.cHead;
    ctx.fillRect(x - s * C.headW * 0.5, y + s * C.headY, s * C.headW, s * C.headH);
    const eyeGlow = 0.6 + Math.sin(time / C.eyeFlicker) * 0.4;
    ctx.fillStyle = C.cEye;
    ctx.globalAlpha = eyeGlow;
    ctx.shadowColor = C.cEye;
    ctx.shadowBlur = C.eyeGlowSize;
    ctx.fillRect(x + s * C.eyeX, y + s * C.headY + s * C.headH * 0.25, s * C.eyeW, C.eyeH);
    ctx.globalAlpha = 1;
    ctx.shadowBlur = 0;

    ctx.restore();
}

// â”€â”€ æç”»: æ­¦å™¨ï¼ˆç‹¬ç«‹æç”»é–¢æ•°ï¼ã“ã‚ŒãŒåˆ†é›¢ã®å¨åŠ›ã€‚ï¼‰ â”€â”€
function drawWeapon(ctx, x, y, baseSize, facing, attackType, attackPhase, time) {
    const C = CHAR_CONFIG;
    const W = WEAPON_CONFIG;
    const s = baseSize * C.scale;

    ctx.save();
    if (facing === -1) {
        ctx.translate(x, y); ctx.scale(-1, 1); ctx.translate(-x, -y);
    }

    // å…ˆç«¯æç”»ãƒ˜ãƒ«ãƒ‘ãƒ¼
    function drawTip(tx, ty) {
        ctx.fillStyle = W.cTip;
        if (W.glowSize > 0) { ctx.shadowColor = W.cGlow; ctx.shadowBlur = W.glowSize; }
        if (W.tipShape === 0) { // å››è§’
            ctx.fillRect(tx - W.tipSize/2, ty - W.tipSize/2, W.tipSize, W.tipSize);
        } else if (W.tipShape === 1) { // ä¸¸
            ctx.beginPath(); ctx.arc(tx, ty, W.tipSize/2, 0, Math.PI * 2); ctx.fill();
        } else { // ä¸‰è§’
            ctx.beginPath();
            ctx.moveTo(tx + W.tipSize/2, ty);
            ctx.lineTo(tx - W.tipSize/2, ty - W.tipSize/2);
            ctx.lineTo(tx - W.tipSize/2, ty + W.tipSize/2);
            ctx.closePath(); ctx.fill();
        }
        ctx.shadowBlur = 0;
    }

    ctx.save();
    if (attackType === 'normal' || attackType === 'weak') {
        // å¼±æ”»æ’ƒï¼šæ¨ªæŒ¯ã‚Š
        const swingAngle = Math.sin(attackPhase * Math.PI) * 1.2;
        ctx.translate(x + s * 0.3, y - s * 0.2);
        ctx.rotate(swingAngle - 0.3);
        ctx.fillStyle = W.cArm;
        if (W.glowSize > 0) { ctx.shadowColor = W.cGlow; ctx.shadowBlur = W.glowSize; }
        ctx.fillRect(0, -W.armW/2, W.armLen, W.armW);
        ctx.shadowBlur = 0;
        drawTip(W.armLen, 0);
    } else if (attackType === 'front-wide') {
        // ãƒ¯ã‚¤ãƒ‰ã‚¹ã‚¦ã‚£ãƒ¼ãƒ—
        const sweepAngle = -1.5 + attackPhase * 3.0;
        ctx.translate(x + s * 0.3, y);
        ctx.rotate(sweepAngle);
        ctx.fillStyle = '#ef4444';
        ctx.shadowColor = '#ef4444'; ctx.shadowBlur = 10;
        ctx.fillRect(0, -W.armW/2 - 1, W.armLen + 13, W.armW + 2);
        ctx.shadowBlur = 0;
        drawTip(W.armLen + 10, 0);
    } else if (attackType === 'pierce') {
        // ãƒ”ã‚¢ã‚·ãƒ³ã‚°ãƒ¬ã‚¤
        const thrustLen = attackPhase * 40;
        ctx.fillStyle = '#22d3ee';
        ctx.shadowColor = '#22d3ee'; ctx.shadowBlur = 12;
        ctx.fillRect(x + s * 0.3, y - s * 0.2 - W.armW/2, W.armLen + thrustLen, W.armW);
        ctx.shadowBlur = 0;
        drawTip(x + s * 0.3 + W.armLen + thrustLen, y - s * 0.2);
    } else if (attackType === 'wide') {
        // ã‚°ãƒ©ãƒ³ãƒ‰ã‚¯ãƒ­ã‚¹
        const spreadAngle = attackPhase * 0.8;
        ctx.translate(x, y - s * 0.2);
        ctx.save(); ctx.rotate(spreadAngle);
        ctx.fillStyle = '#eab308'; ctx.shadowColor = '#eab308'; ctx.shadowBlur = 10;
        ctx.fillRect(0, -W.armW/2 - 1, W.armLen + 8, W.armW + 2); ctx.shadowBlur = 0;
        drawTip(W.armLen + 6, 0);
        ctx.restore();
        ctx.save(); ctx.rotate(-spreadAngle);
        ctx.fillStyle = '#eab308'; ctx.shadowColor = '#eab308'; ctx.shadowBlur = 10;
        ctx.fillRect(0, -W.armW/2 - 1, W.armLen + 8, W.armW + 2); ctx.shadowBlur = 0;
        drawTip(W.armLen + 6, 0);
        ctx.restore();
    } else {
        // å¾…æ©Ÿ
        const idleSway = Math.sin(time / 800) * 0.1;
        ctx.translate(x + s * 0.3, y + s * 0.1);
        ctx.rotate(0.5 + idleSway);
        ctx.fillStyle = W.cArm;
        if (W.glowSize > 0) { ctx.shadowColor = W.cGlow; ctx.shadowBlur = W.glowSize; }
        ctx.fillRect(0, -W.armW/2, W.armLen, W.armW);
        ctx.shadowBlur = 0;
        drawTip(W.armLen, 0);
    }
    ctx.restore();

    ctx.restore();
}

// Hex â†’ RGB
function hexToRGB(hex) {
    const r = parseInt(hex.slice(1,3), 16);
    const g = parseInt(hex.slice(3,5), 16);
    const b = parseInt(hex.slice(5,7), 16);
    return `${r},${g},${b}`;
}

// â”€â”€ ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³åˆ¶å¾¡ â”€â”€
function getMotionParams(motion, time) {
    switch(motion) {
        case 'idle': return { attackType: null, attackPhase: 0 };
        case 'walk': return { attackType: null, attackPhase: 0 };
        case 'weak': return { attackType: 'normal', attackPhase: (Math.sin(time / 400) + 1) / 2 };
        case 'front-wide': return { attackType: 'front-wide', attackPhase: (Math.sin(time / 600) + 1) / 2 };
        case 'pierce': return { attackType: 'pierce', attackPhase: (Math.sin(time / 500) + 1) / 2 };
        case 'wide': return { attackType: 'wide', attackPhase: (Math.sin(time / 500) + 1) / 2 };
        default: return { attackType: null, attackPhase: 0 };
    }
}

// â”€â”€ ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ— â”€â”€
function render() {
    const w = canvas.width;
    const h = canvas.height;
    const time = performance.now();

    ctx.clearRect(0, 0, w, h);
    ctx.fillStyle = '#1e293b'; ctx.fillRect(0, 0, w, h);

    // ã‚°ãƒªãƒƒãƒ‰
    if (showGrid) {
        ctx.strokeStyle = 'rgba(51,65,85,0.5)'; ctx.lineWidth = 1;
        const step = 20 * (zoom / 2);
        for (let gx = 0; gx < w; gx += step) { ctx.beginPath(); ctx.moveTo(gx, 0); ctx.lineTo(gx, h); ctx.stroke(); }
        for (let gy = 0; gy < h; gy += step) { ctx.beginPath(); ctx.moveTo(0, gy); ctx.lineTo(w, gy); ctx.stroke(); }
        ctx.strokeStyle = 'rgba(59,130,246,0.2)';
        ctx.beginPath(); ctx.moveTo(w/2, 0); ctx.lineTo(w/2, h); ctx.stroke();
        ctx.beginPath(); ctx.moveTo(0, h/2); ctx.lineTo(w, h/2); ctx.stroke();
    }

    // ãƒ¬ãƒ¼ãƒ³ãƒ©ã‚¤ãƒ³
    ctx.strokeStyle = '#334155'; ctx.lineWidth = 1;
    ctx.beginPath(); ctx.moveTo(0, h * 0.55); ctx.lineTo(w, h * 0.55); ctx.stroke();

    const { attackType, attackPhase } = getMotionParams(currentMotion, time);

    // å³å‘ãï¼ˆç´ ä½“â†’æ­¦å™¨ã®é †ã«æç”»ï¼‰
    drawBody(ctx, w * 0.35, h * 0.55, 16, 1, time);
    drawWeapon(ctx, w * 0.35, h * 0.55, 16, 1, attackType, attackPhase, time);
    // å·¦å‘ã
    drawBody(ctx, w * 0.65, h * 0.55, 16, -1, time);
    drawWeapon(ctx, w * 0.65, h * 0.55, 16, -1, attackType, attackPhase, time);

    // ãƒ©ãƒ™ãƒ«
    ctx.fillStyle = 'rgba(148,163,184,0.4)'; ctx.font = '10px sans-serif'; ctx.textAlign = 'center';
    ctx.fillText('â†’ å³å‘ã', w * 0.35, h * 0.55 + 50);
    ctx.fillText('â† å·¦å‘ã', w * 0.65, h * 0.55 + 50);

    updateConfigJSON();
    requestAnimationFrame(render);
}

function updateConfigJSON() {
    const el = document.getElementById('config-json');
    if (el && !document.getElementById('panel-export').classList.contains('hidden')) {
        el.value = JSON.stringify({ character: CHAR_CONFIG, weapon: WEAPON_CONFIG }, null, 2);
    }
}

// â”€â”€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— â”€â”€
function setup() {
    bindSliders();

    // ä¿å­˜æ¸ˆã¿è¨­å®šã‚’èª­ã¿è¾¼ã¿
    try {
        const savedChar = localStorage.getItem('lane_defense_character_config');
        if (savedChar) { Object.assign(CHAR_CONFIG, JSON.parse(savedChar)); }
        const savedWpn = localStorage.getItem('lane_defense_weapon_config');
        if (savedWpn) { Object.assign(WEAPON_CONFIG, JSON.parse(savedWpn)); }
        syncUIFromConfig();
    } catch(e) { console.warn('è¨­å®šã®èª­ã¿è¾¼ã¿ã«å¤±æ•—:', e); }

    // ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
    document.querySelectorAll('.motion-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.motion-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            currentMotion = btn.dataset.motion;
        });
    });

    // ãƒ‘ãƒãƒ«ã‚¿ãƒ–
    document.querySelectorAll('.tab-btn-d').forEach(btn => {
        btn.addEventListener('click', () => {
            document.querySelectorAll('.tab-btn-d').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.panel').forEach(p => p.classList.add('hidden'));
            document.getElementById('panel-' + btn.dataset.panel).classList.remove('hidden');
        });
    });

    // ã‚ºãƒ¼ãƒ 
    document.getElementById('btn-zoom-in').addEventListener('click', () => {
        zoom = Math.min(4, zoom + 0.5);
        document.getElementById('zoom-label').innerText = (zoom * 100) + '%';
        canvas.width = 200 * zoom; canvas.height = 250 * zoom;
    });
    document.getElementById('btn-zoom-out').addEventListener('click', () => {
        zoom = Math.max(1, zoom - 0.5);
        document.getElementById('zoom-label').innerText = (zoom * 100) + '%';
        canvas.width = 200 * zoom; canvas.height = 250 * zoom;
    });
    document.getElementById('btn-toggle-grid').addEventListener('click', () => { showGrid = !showGrid; });

    // ç´ ä½“ãƒ—ãƒªã‚»ãƒƒãƒˆ
    document.querySelectorAll('.preset-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            Object.assign(CHAR_CONFIG, PRESETS[btn.dataset.preset]);
            syncUIFromConfig();
        });
    });

    // æ­¦å™¨ãƒ—ãƒªã‚»ãƒƒãƒˆ
    document.querySelectorAll('.wpn-preset-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            Object.assign(WEAPON_CONFIG, WEAPON_PRESETS[btn.dataset.wpn]);
            syncUIFromConfig();
        });
    });

    // æœ¬ä½“ã«åæ˜ ï¼ˆã‚­ãƒ£ãƒ©ã¨æ­¦å™¨ã‚’åˆ¥ã€…ã«ä¿å­˜ï¼‰
    document.getElementById('btn-save-config').addEventListener('click', () => {
        // å¾Œæ–¹äº’æ›: æœ¬ä½“ãŒèª­ã‚ã‚‹ã‚ˆã†ã«çµ±åˆç‰ˆã‚‚ä¿å­˜
        const merged = { ...CHAR_CONFIG, armLen: WEAPON_CONFIG.armLen, armW: WEAPON_CONFIG.armW, tipSize: WEAPON_CONFIG.tipSize, cArm: WEAPON_CONFIG.cArm, cArmTip: WEAPON_CONFIG.cTip };
        localStorage.setItem('lane_defense_character_config', JSON.stringify(merged));
        localStorage.setItem('lane_defense_weapon_config', JSON.stringify(WEAPON_CONFIG));
        const statusEl = document.getElementById('save-status');
        statusEl.innerText = 'âœ… æœ¬ä½“ã«åæ˜ ã—ã¾ã—ãŸï¼ã‚²ãƒ¼ãƒ ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨é©ç”¨ã•ã‚Œã¾ã™ã€‚';
        statusEl.style.color = '#4ade80'; statusEl.style.opacity = '1';
        setTimeout(() => { statusEl.style.opacity = '0'; }, 3000);
    });

    // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™
    document.getElementById('btn-reset-config').addEventListener('click', () => {
        if (!confirm('ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã«æˆ»ã—ã¾ã™ã‹ï¼Ÿ')) return;
        localStorage.removeItem('lane_defense_character_config');
        localStorage.removeItem('lane_defense_weapon_config');
        Object.assign(CHAR_CONFIG, PRESETS.default, {
            scale:1.5, headW:0.9, headH:0.3, headY:-0.85, eyeW:0.3, eyeH:4, eyeX:0.08,
            torsoW:1.0, torsoH:1.1, torsoY:-0.6, coreR:5, coreY:-0.1,
            legW:5, legLen:10, legSpread:7, stripes:2, stripeH:2,
            coreGlowSize:8, eyeGlowSize:6, shadowW:0.8, shadowAlpha:0.3,
            breathSpeed:300, walkSpeed:120, eyeFlicker:500, cShadow:'#000000'
        });
        Object.assign(WEAPON_CONFIG, WEAPON_PRESETS.standard);
        syncUIFromConfig();
        const statusEl = document.getElementById('save-status');
        statusEl.innerText = 'ğŸ”„ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã—ã¾ã—ãŸ';
        statusEl.style.color = '#60a5fa'; statusEl.style.opacity = '1';
        setTimeout(() => { statusEl.style.opacity = '0'; }, 3000);
    });

    // JSONã‚³ãƒ”ãƒ¼
    document.getElementById('btn-copy-json').addEventListener('click', () => {
        const el = document.getElementById('config-json');
        el.value = JSON.stringify({ character: CHAR_CONFIG, weapon: WEAPON_CONFIG }, null, 2);
        navigator.clipboard.writeText(el.value);
        const statusEl = document.getElementById('save-status');
        statusEl.innerText = 'ğŸ“‹ ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼'; statusEl.style.color = '#60a5fa'; statusEl.style.opacity = '1';
        setTimeout(() => { statusEl.style.opacity = '0'; }, 2000);
    });

    // JSONã‚¤ãƒ³ãƒãƒ¼ãƒˆ
    document.getElementById('btn-import-json').addEventListener('click', () => {
        const input = prompt('è¨­å®šJSONã‚’è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„:');
        if (input) {
            try {
                const parsed = JSON.parse(input);
                if (parsed.character) Object.assign(CHAR_CONFIG, parsed.character);
                if (parsed.weapon) Object.assign(WEAPON_CONFIG, parsed.weapon);
                syncUIFromConfig();
            } catch(e) { alert('JSONã®è§£æã«å¤±æ•—: ' + e.message); }
        }
    });

    canvas.width = 200 * zoom; canvas.height = 250 * zoom;
    render();
}

setup();
</script>